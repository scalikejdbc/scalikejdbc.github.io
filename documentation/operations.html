<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Operations - ScalikeJDBC</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
  </head>
  <body>
    <div class="container">
    <div class="navbar" role="navigation" id="header">
      <div class="container">
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a class="navbar-brand" href="/">ScalikeJDBC</a></li>
            <li><a href="https://groups.google.com/group/scalikejdbc-users-group">Users Group</a></li>
            <li><a href="https://github.com/scalikejdbc/scalikejdbc">GitHub</a></li>
            <li><a href="https://skinny-framework.github.io/documentation/orm.html">Skinny ORM</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="col-xs-6 pull-right" style="height:50px;">
      <gcse:searchbox-only></gcse:searchbox-only>
    </div>
      <div class="col-xs-9 left">
        <div class="content">
          <h2 id="operations">Operations</h2>

<hr/>

<h3 id="query-api">Query API</h3>

<hr/>

<p>ScalikeJDBC provides a variety of query APIs including <code>single</code>, <code>first</code>, <code>list</code>, and <code>foreach</code>. Each of these functions will execute the <code>java.sql.PreparedStatement#executeQuery()</code>.</p>

<hr/>

<h4 id="single-optional-result-for-query">Single / Optional Result for Query</h4>

<hr/>

<p>The <code>single</code> API returns a single matched row as an <code>Option</code>. If multiple rows are returned unexpectedly, a runtime exception is thrown.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scalikejdbc._</span>

<span class="k">val</span> <span class="nv">id</span> <span class="k">=</span> <span class="mi">123</span>

<span class="c1">// simple example</span>
<span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp where id = ${id}"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">)).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">// defined mapper as a function</span>
<span class="k">val</span> <span class="nv">nameOnly</span> <span class="k">=</span> <span class="o">(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">WrappedResultSet</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp where id = ${id}"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">nameOnly</span><span class="o">).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">// define a class to map the result</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Emp</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">emp</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Emp</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select id, name from emp where id = ${id}"</span>
    <span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nc">Emp</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"id"</span><span class="o">),</span> <span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">))).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">// QueryDSL</span>
<span class="k">object</span> <span class="nc">Emp</span> <span class="k">extends</span> <span class="nc">SQLSyntaxSupport</span><span class="o">[</span><span class="kt">Emp</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">e</span><span class="k">:</span> <span class="kt">ResultName</span><span class="o">[</span><span class="kt">Emp</span><span class="o">])(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">WrappedResultSet</span><span class="o">)</span><span class="k">:</span> <span class="kt">Emp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Emp</span><span class="o">(</span><span class="n">id</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">id</span><span class="o">),</span> <span class="n">name</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">))</span>
<span class="o">}</span>
<span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">emp</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Emp</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nv">select</span><span class="o">.</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span> <span class="n">as</span> <span class="n">e</span><span class="o">).</span><span class="py">where</span><span class="o">.</span><span class="py">eq</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">id</span><span class="o">,</span> <span class="n">id</span><span class="o">)</span> <span class="o">}.</span><span class="py">map</span><span class="o">(</span><span class="nc">Emp</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">resultName</span><span class="o">)).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
<p>You can learn about QueryDSL in detail here:</p>

<p><a href="/documentation/query-dsl.html">/documentation/query-dsl</a></p>

<hr/>

<h4 id="first-result-from-multiple-results">First Result from Multiple Results</h4>

<hr/>

<p>The <code>first</code> API retrieves the first row from the matched rows and returns it as an <code>Option</code>.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">)).</span><span class="py">first</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">select</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">result</span><span class="o">.</span><span class="py">name</span><span class="o">).</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span> <span class="n">as</span> <span class="n">e</span><span class="o">)</span> <span class="o">}.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">)).</span><span class="py">first</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h4 id="list-results">List Results</h4>

<hr/>

<p>The <code>list</code> API returns matched multiple rows as a <code>scala.collection.immutable.List</code>.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">)).</span><span class="py">list</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">name</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">select</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">result</span><span class="o">.</span><span class="py">name</span><span class="o">).</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span> <span class="n">as</span> <span class="n">e</span><span class="o">)</span> <span class="o">}.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">)).</span><span class="py">list</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h4 id="foreach-operation">Foreach Operation</h4>

<hr/>

<p>The <code>foreach</code> API allows you to perform side effects during iterations. This method is particularly useful for handling large <code>ResultSet</code> streaming data efficiently.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp"</span><span class="o">.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">rs</span> <span class="k">=&gt;</span>
    <span class="nv">out</span><span class="o">.</span><span class="py">write</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">)</span>
<span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">select</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">).</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span> <span class="n">as</span> <span class="n">e</span><span class="o">)</span> <span class="o">}.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">rs</span> <span class="k">=&gt;</span>
    <span class="nv">out</span><span class="o">.</span><span class="py">write</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h4 id="setting-jdbc-fetchsize">Setting JDBC fetchSize</h4>

<hr/>

<p>In cases like the PostgreSQL JDBC driver, setting the fetchSize to 0 (which is the default) can lead to infinite caching of result sets and subsequently cause memory issues. It&rsquo;s important to manage the fetchSize appropriately to prevent such problems.</p>

<p><a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#setFetchSize-int-">https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#setFetchSize-int-</a></p>

<p>From version 2.0.5 onwards, ScalikeJDBC allows you to specify the JDBC fetchSize to better control memory usage and enhance performance:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">val</span> <span class="nv">e</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">)</span>
<span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"select name from emp"</span>
    <span class="o">.</span><span class="py">fetchSize</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>
    <span class="o">.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">rs</span> <span class="k">=&gt;</span> <span class="nv">out</span><span class="o">.</span><span class="py">write</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="s">"name"</span><span class="o">))</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Alternatively, you can set the fetchSize directly on the <code>scalikejdbc.DBSession</code> to manage data retrieval more efficiently. This approach is also supported in ScalikeJDBC from version 2.0.5 onwards:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="nf">val</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="nv">Emp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"e"</span><span class="o">),</span> <span class="nv">Cmp</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"c"</span><span class="o">))</span>

<span class="nc">DB</span> <span class="n">readOnly</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="nv">session</span><span class="o">.</span><span class="py">fetchSize</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>

  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">select</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">).</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span> <span class="n">as</span> <span class="n">e</span><span class="o">)</span> <span class="o">}.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">rs</span> <span class="k">=&gt;</span>
    <span class="nv">out</span><span class="o">.</span><span class="py">write</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="nv">e</span><span class="o">.</span><span class="py">name</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">select</span><span class="o">(</span><span class="nv">c</span><span class="o">.</span><span class="py">name</span><span class="o">).</span><span class="py">from</span><span class="o">(</span><span class="nc">Cmp</span> <span class="n">as</span> <span class="n">c</span><span class="o">)</span> <span class="o">}.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">rs</span> <span class="k">=&gt;</span>
    <span class="nv">out</span><span class="o">.</span><span class="py">write</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">string</span><span class="o">(</span><span class="nv">c</span><span class="o">.</span><span class="py">name</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h4 id="implementing-custom-extractor">Implementing Custom Extractor</h4>

<hr/>

<p>Implementing a custom extractor can be essential when you need more control over how data is retrieved from a result set, such as preserving null values. Here&rsquo;s an example of how you can create a custom extractor in ScalikeJDBC, useful for testing queries and ensuring null values are handled appropriately:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">def</span> <span class="nf">toMap</span><span class="o">(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">WrappedResultSet</span><span class="o">)</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Any</span><span class="o">]</span> <span class="k">=</span>  <span class="o">{</span>
  <span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="nv">rs</span><span class="o">.</span><span class="py">metaData</span><span class="o">.</span><span class="py">getColumnCount</span><span class="o">).</span><span class="py">foldLeft</span><span class="o">(</span><span class="nc">Map</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Any</span><span class="o">]())</span> <span class="o">{</span> <span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="n">i</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="k">val</span> <span class="nv">label</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">metaData</span><span class="o">.</span><span class="py">getColumnLabel</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
    <span class="nc">Some</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">any</span><span class="o">(</span><span class="n">label</span><span class="o">)).</span><span class="py">map</span> <span class="o">{</span> <span class="n">nullableValue</span> <span class="k">=&gt;</span> <span class="n">result</span> <span class="o">+</span> <span class="o">(</span><span class="n">label</span> <span class="o">-&gt;</span> <span class="n">nullableValue</span><span class="o">)</span> <span class="o">}.</span><span class="py">getOrElse</span><span class="o">(</span><span class="n">result</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">sql</span><span class="s">"select * from emp"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nf">toMap</span><span class="o">(</span><span class="n">rs</span><span class="o">)).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
</code></pre></div>
<p>This code snippet demonstrates how to use a custom extractor to fetch data from a database while preserving null values as <code>Option</code> types in Scala, enhancing the robustness of your data handling logic.</p>

<hr/>

<h4 id="using-parameterbinder">Using ParameterBinder</h4>

<hr/>

<p>Using <code>ParameterBinder</code> in ScalikeJDBC lets you customize the binding of parameters to a <code>PreparedStatement</code>. This is particularly useful for handling complex data types such as binary streams. Here&rsquo;s how you can bind an <code>InputStream</code> to a <code>PreparedStatement</code> using <code>#setBinaryStream()</code>:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="n">sql</span><span class="s">"create table blob_example (id bigint, data blob)"</span><span class="o">).</span><span class="py">execute</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

<span class="k">val</span> <span class="nv">bytes</span> <span class="k">=</span> <span class="nv">scala</span><span class="o">.</span><span class="py">Array</span><span class="o">[</span><span class="kt">Byte</span><span class="o">](</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">in</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">bytes</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">bytesBinder</span> <span class="k">=</span> <span class="nc">ParameterBinder</span><span class="o">(</span>
  <span class="n">value</span> <span class="k">=</span> <span class="n">in</span><span class="o">,</span>
  <span class="n">binder</span> <span class="k">=</span> <span class="o">(</span><span class="n">stmt</span><span class="k">:</span> <span class="kt">PreparedStatement</span><span class="o">,</span> <span class="n">idx</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nv">stmt</span><span class="o">.</span><span class="py">setBinaryStream</span><span class="o">(</span><span class="n">idx</span><span class="o">,</span> <span class="n">in</span><span class="o">,</span> <span class="nv">bytes</span><span class="o">.</span><span class="py">length</span><span class="o">)</span>
<span class="o">)</span>

<span class="n">sql</span><span class="s">"insert into blob_example (data) values (${bytesBinder})"</span><span class="o">).</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
</code></pre></div>
<p>To enable a <code>ParameterBinder</code> implicitly across your Scala code, you must define a <code>ParameterBinderFactory</code>. This factory will automatically generate <code>ParameterBinder</code> instances for specific types as needed. Here&rsquo;s an example of how to set up a <code>ParameterBinderFactory</code> for a <code>MemberId</code> type, which is useful for binding binary data:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">case</span> <span class="k">class</span> <span class="nc">MemberId</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Member</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">MemberId</span><span class="o">,</span> <span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Member</span> <span class="k">extends</span> <span class="nc">SQLSyntaxSupport</span><span class="o">[</span><span class="kt">Member</span><span class="o">]</span> <span class="o">{}</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">memberIdPbf</span> <span class="k">=</span> <span class="nc">ParameterBinderFactory</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">value</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">stmt</span><span class="o">,</span> <span class="n">idx</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nv">stmt</span><span class="o">.</span><span class="py">setInt</span><span class="o">(</span><span class="n">idx</span><span class="o">,</span> <span class="nv">value</span><span class="o">.</span><span class="py">value</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">m</span> <span class="k">=</span> <span class="nv">Member</span><span class="o">.</span><span class="py">syntax</span><span class="o">(</span><span class="s">"m"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">memberId</span> <span class="k">=</span> <span class="nc">MemberId</span><span class="o">(</span><span class="mi">123</span><span class="o">)</span>
<span class="n">withSQL</span> <span class="o">{</span>
  <span class="nv">select</span><span class="o">.</span><span class="py">from</span><span class="o">(</span><span class="nc">Member</span> <span class="n">as</span> <span class="n">m</span><span class="o">).</span><span class="py">where</span><span class="o">.</span><span class="py">eq</span><span class="o">(</span><span class="nv">m</span><span class="o">.</span><span class="py">id</span><span class="o">,</span> <span class="n">memberId</span><span class="o">)</span> <span class="c1">// `memberIdPbf` properly affects here</span>
<span class="o">}.</span><span class="py">map</span><span class="o">(</span><span class="nc">Member</span><span class="o">(</span><span class="k">_</span><span class="o">)).</span><span class="py">single</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

<span class="c1">// CAUTION:</span>
<span class="c1">// The SQL Interpolation style doesn't work with ParameterBinderFactory while it works with ParameterBinder</span>
<span class="n">sql</span><span class="s">"select id from member where id = $memberId"</span> <span class="c1">// will bind `memberId` as an object</span>
</code></pre></div>
<hr/>

<h4 id="using-typebinder">Using TypeBinder</h4>

<hr/>

<p>To extract values of a specific type from a <code>ResultSet</code>, you&rsquo;ll need to implement a <code>TypeBinder</code> type class for that type. This allows you to define custom extraction logic for handling database values as custom types. For example, if you have a <code>MemberId</code> type that wraps a <code>Long</code> value, you can create a <code>TypeBinder</code> for it like this:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scalikejdbc._</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">session</span> <span class="k">=</span> <span class="nc">AutoSession</span>

<span class="c1">// prepare data</span>
<span class="n">sql</span><span class="s">"create table member (id bigint not null primary key, name varchar(100))"</span><span class="o">.</span><span class="py">execute</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="n">sql</span><span class="s">"insert into member values (1, 'Alice')"</span><span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="n">sql</span><span class="s">"insert into member values (2, 'Bob')  "</span><span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="n">sql</span><span class="s">"insert into member values (3, 'Chris')"</span><span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">MemberId</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Member</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">MemberId</span><span class="o">,</span> <span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="c1">// compilation error here</span>
<span class="k">val</span> <span class="nv">ids</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="k">=</span> <span class="n">sql</span><span class="s">"select * from member"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">get</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">](</span><span class="s">"id"</span><span class="o">)).</span><span class="py">list</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

<span class="c1">// &lt;console&gt;:24: error: could not find implicit value for evidence parameter of type scalikejdbc.TypeBinder[MemberId]</span>
<span class="c1">//         val ids: Seq[MemberId] = sql"select * from member".map(_.get[MemberId]("id")).list.apply()</span>
<span class="c1">//                                                                               ^</span>
</code></pre></div>
<p>Since your <code>MemberId</code> type is not available by default, you&rsquo;ve got a compilation error. You can see all predef types by default <a href="https://github.com/scalikejdbc/scalikejdbc/blob/master/scalikejdbc-core/src/main/scala/scalikejdbc/TypeBinder.scala">here</a>.</p>

<p>As such, you need to define your own <code>TypeBinder</code> for <code>MemberId</code> type as below.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="c1">// define TypeBinder[MemberId]</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="nv">memberIdTypeBinder</span><span class="k">:</span> <span class="kt">TypeBinder</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TypeBinder</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">ResultSet</span><span class="o">,</span> <span class="n">label</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">MemberId</span> <span class="o">=</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">getLong</span><span class="o">(</span><span class="n">label</span><span class="o">))</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">ResultSet</span><span class="o">,</span> <span class="n">index</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">MemberId</span> <span class="o">=</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">getLong</span><span class="o">(</span><span class="n">index</span><span class="o">))</span>
<span class="o">}</span>

<span class="c1">// WrappedResultSet#get[MemberId]("id") works with above implicit definition</span>
<span class="k">val</span> <span class="nv">ids</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="k">=</span> <span class="n">sql</span><span class="s">"select id from member"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">get</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">](</span><span class="s">"id"</span><span class="o">)).</span><span class="py">list</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="c1">// ids: Seq[MemberId] = List(MemberId(1), MemberId(1), MemberId(2), MemberId(3))</span>
</code></pre></div>
<p>Certainly, you can handle custom types like MemberId without explicitly defining a <code>TypeBinder</code> by manually extracting and converting the data within your database queries. Here&rsquo;s how you might approach this:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">val</span> <span class="nv">ids</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span> <span class="k">=</span> <span class="n">sql</span><span class="s">"select id from member"</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">rs</span> <span class="k">=&gt;</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="s">"id"</span><span class="o">))).</span><span class="py">list</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
</code></pre></div>
<hr/>

<h4 id="binders-to-define-both-parameterbinderfactory-and-typebinder">Binders to define both ParameterBinderFactory and TypeBinder</h4>

<hr/>

<p>Using <code>Binders</code> is highly convenient when you need to define both a <code>ParameterBinderFactory</code> and a <code>TypeBinder</code> for a custom type. This approach allows for consistent and streamlined handling of how a type is both sent to and retrieved from the database, ensuring that your custom types are seamlessly integrated into your database operations.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="c1">// object Binders {</span>
<span class="c1">//   def of[A](f: Any =&gt; A)(g: A =&gt; (PreparedStatement, Int) =&gt; Unit): Binders[A]</span>
<span class="c1">// }</span>

<span class="k">import</span> <span class="nn">scalikejdbc._</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">MemberId</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>

<span class="c1">// If you paste this code on the REPL, use :paste</span>
<span class="o">{</span>
  <span class="nv">Binders</span><span class="o">.</span><span class="py">of</span><span class="o">[</span><span class="kt">MemberId</span><span class="o">]</span>
  <span class="c1">// For TypeBinder (f: Any =&gt; A)</span>
  <span class="o">{</span>
    <span class="k">case</span> <span class="kc">null</span> <span class="k">=&gt;</span> <span class="kc">null</span>
    <span class="k">case</span> <span class="n">v</span><span class="k">:</span> <span class="kt">Float</span> <span class="o">=&gt;</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">v</span><span class="o">.</span><span class="py">toInt</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">v</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=&gt;</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">v</span><span class="o">.</span><span class="py">toInt</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Number</span> <span class="o">=&gt;</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">n</span><span class="o">.</span><span class="py">intValue</span><span class="o">)</span>
    <span class="k">case</span> <span class="n">v</span> <span class="k">=&gt;</span> <span class="nc">MemberId</span><span class="o">(</span><span class="nv">v</span><span class="o">.</span><span class="py">toString</span><span class="o">.</span><span class="py">toInt</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="c1">// For ParameterBinderFactory (A =&gt; (PreparedStatement, Int) =&gt; Unit)</span>
  <span class="o">{</span> <span class="n">v</span> <span class="k">=&gt;</span>
    <span class="o">(</span><span class="n">ps</span><span class="o">,</span> <span class="n">idx</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="nv">ps</span><span class="o">.</span><span class="py">setInt</span><span class="o">(</span><span class="n">idx</span><span class="o">,</span> <span class="nv">v</span><span class="o">.</span><span class="py">value</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h4 id="using-joda-time-library">Using joda-time library</h4>

<hr/>

<p>When working with the joda-time library, it&rsquo;s necessary to include the appropriate optional module to ensure full compatibility and functionality. Here&rsquo;s how you can set up and use the joda-time support module within your Scala project:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.scalikejdbc"</span> <span class="o">%%</span> <span class="s">"scalikejdbc-joda-time"</span> <span class="o">%</span> <span class="s">"4.3.0"</span>
</code></pre></div>
<p>After importing, you can use the pre-defined <code>ParameterBinderFactory</code> and <code>TypeBinder</code> instances to handle joda-time specific types:</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scalikejdbc._</span>
<span class="c1">// If you need ParameterBinderFactory for joda-time classes</span>
<span class="k">import</span> <span class="nn">scalikejdbc.jodatime.JodaParameterBinderFactory._</span>
<span class="c1">// If you need TypeBinder for joda-time classes</span>
<span class="k">import</span> <span class="nn">scalikejdbc.jodatime.JodaTypeBinder._</span>
<span class="k">import</span> <span class="nn">java.time._</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Group</span><span class="o">(</span>
  <span class="n">id</span><span class="k">:</span> <span class="kt">Long</span><span class="o">,</span>
  <span class="n">name</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">],</span>
  <span class="n">createdAt</span><span class="k">:</span> <span class="kt">ZonedDateTime</span><span class="o">)</span>

<span class="k">object</span> <span class="nc">Group</span> <span class="k">extends</span> <span class="nc">SQLSyntaxSupport</span><span class="o">[</span><span class="kt">Group</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">g</span><span class="k">:</span> <span class="kt">SyntaxProvider</span><span class="o">[</span><span class="kt">Group</span><span class="o">])(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">WrappedResultSet</span><span class="o">)</span><span class="k">:</span> <span class="kt">Group</span> <span class="o">=</span> <span class="nf">apply</span><span class="o">(</span><span class="nv">g</span><span class="o">.</span><span class="py">resultName</span><span class="o">)(</span><span class="n">rs</span><span class="o">)</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">g</span><span class="k">:</span> <span class="kt">ResultName</span><span class="o">[</span><span class="kt">Group</span><span class="o">])(</span><span class="n">rs</span><span class="k">:</span> <span class="kt">WrappedResultSet</span><span class="o">)</span><span class="k">:</span> <span class="kt">Group</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Group</span><span class="o">(</span>
    <span class="n">id</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">g</span><span class="o">.</span><span class="py">id</span><span class="o">),</span>
    <span class="n">name</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">g</span><span class="o">.</span><span class="py">name</span><span class="o">),</span>
    <span class="n">createdAt</span> <span class="k">=</span> <span class="nv">rs</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">g</span><span class="o">.</span><span class="py">createdAt</span><span class="o">)</span>
    <span class="c1">// (or) createdAt = rs.get[DateTime](g.createdAt)</span>
    <span class="c1">// (or) createdAt = rs.jodaDateTime(g.createdAt)</span>
  <span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<hr/>

<h3 id="update-api">Update API</h3>

<hr/>

<p>The <code>update</code> API executes <code>java.sql.PreparedStatement#executeUpdate()</code>.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scalikejdbc._</span>

<span class="nc">DB</span> <span class="n">localTx</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"""insert into emp (id, name, created_at) values (${id}, ${name}, current_timestamp)"""</span>
    <span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
  <span class="k">val</span> <span class="nv">newId</span> <span class="k">=</span> <span class="n">sql</span><span class="s">"insert into emp (name, created_at) values (${name}, current_timestamp)"</span>
    <span class="o">.</span><span class="py">updateAndReturnGeneratedKey</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
  <span class="n">sql</span><span class="s">"update emp set name = ${newName} where id = ${newId}"</span><span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
  <span class="n">sql</span><span class="s">"delete from emp where id = ${newId}"</span><span class="o">.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">column</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">column</span>
<span class="nc">DB</span> <span class="n">localTx</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">s</span> <span class="k">=&gt;</span>
  <span class="n">withSQL</span> <span class="o">{</span>
    <span class="nv">insert</span><span class="o">.</span><span class="py">into</span><span class="o">(</span><span class="nc">Emp</span><span class="o">).</span><span class="py">namedValues</span><span class="o">(</span>
      <span class="nv">column</span><span class="o">.</span><span class="py">id</span> <span class="o">-&gt;</span> <span class="n">id</span><span class="o">,</span>
      <span class="nv">column</span><span class="o">.</span><span class="py">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">,</span>
      <span class="nv">column</span><span class="o">.</span><span class="py">createdAt</span> <span class="o">-&gt;</span> <span class="nv">sqls</span><span class="o">.</span><span class="py">currentTimestamp</span><span class="o">)</span>
   <span class="o">}.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

  <span class="k">val</span> <span class="nv">newId</span><span class="k">:</span> <span class="kt">Long</span> <span class="o">=</span> <span class="n">withSQL</span> <span class="o">{</span>
    <span class="nv">insert</span><span class="o">.</span><span class="py">into</span><span class="o">(</span><span class="nc">Emp</span><span class="o">).</span><span class="py">namedValues</span><span class="o">(</span><span class="nv">column</span><span class="o">.</span><span class="py">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">,</span> <span class="nv">column</span><span class="o">.</span><span class="py">createdAt</span> <span class="o">-&gt;</span> <span class="nv">sqls</span><span class="o">.</span><span class="py">currentTimestamp</span><span class="o">)</span>
  <span class="o">}.</span><span class="py">updateAndReturnGeneratedKey</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>

  <span class="n">withSQL</span> <span class="o">{</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Emp</span><span class="o">).</span><span class="py">set</span><span class="o">(</span><span class="nv">column</span><span class="o">.</span><span class="py">name</span> <span class="o">-&gt;</span> <span class="n">newName</span><span class="o">).</span><span class="py">where</span><span class="o">.</span><span class="py">eq</span><span class="o">(</span><span class="nv">column</span><span class="o">.</span><span class="py">id</span><span class="o">,</span> <span class="n">newId</span><span class="o">)</span> <span class="o">}.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
  <span class="n">withSQL</span> <span class="o">{</span> <span class="nv">delete</span><span class="o">.</span><span class="py">from</span><span class="o">(</span><span class="nc">Emp</span><span class="o">).</span><span class="py">where</span><span class="o">.</span><span class="py">eq</span><span class="o">(</span><span class="nv">column</span><span class="o">.</span><span class="py">id</span><span class="o">,</span> <span class="n">newId</span><span class="o">)</span> <span class="o">}.</span><span class="py">update</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

</code></pre></div>
<hr/>

<h3 id="execute-api">Execute API</h3>

<hr/>

<p>The <code>execute</code> API executes <code>java.sql.PreparedStatement#execute()</code>.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="nc">DB</span> <span class="n">autoCommit</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"create table emp (id integer primary key, name varchar(30))"</span><span class="o">.</span><span class="py">execute</span><span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="c1">// QueryDSL doesn't support DDL yet.</span>
</code></pre></div>
<hr/>

<h3 id="batch-api">Batch API</h3>

<hr/>

<p>The <code>batch</code> and <code>batchByName</code> executes <code>java.sql.PreparedStatement#executeBatch()</code>.</p>
<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scalikejdbc._</span>

<span class="nc">DB</span> <span class="n">localTx</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="k">val</span> <span class="nv">batchParams</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Seq</span><span class="o">[</span><span class="kt">Any</span><span class="o">]]</span> <span class="k">=</span> <span class="o">(</span><span class="mi">2001</span> <span class="n">to</span> <span class="mi">3000</span><span class="o">).</span><span class="py">map</span><span class="o">(</span><span class="n">i</span> <span class="k">=&gt;</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="s">"name"</span> <span class="o">+</span> <span class="n">i</span><span class="o">))</span>
  <span class="n">sql</span><span class="s">"insert into emp (id, name) values (?, ?)"</span><span class="o">.</span><span class="py">batch</span><span class="o">(</span><span class="n">batchParams</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">).</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="nc">DB</span> <span class="n">localTx</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="n">sql</span><span class="s">"insert into emp (id, name) values ({id}, {name})"</span>
    <span class="o">.</span><span class="py">batchByName</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="s">"id"</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">,</span> <span class="s">"name"</span> <span class="o">-&gt;</span> <span class="s">"Alice"</span><span class="o">),</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">"id"</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="o">,</span> <span class="s">"name"</span> <span class="o">-&gt;</span> <span class="s">"Bob"</span><span class="o">))</span><span class="k">:_</span><span class="kt">*</span><span class="o">)</span>
    <span class="o">.</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">column</span> <span class="k">=</span> <span class="nv">Emp</span><span class="o">.</span><span class="py">column</span>
<span class="nc">DB</span> <span class="n">localTx</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">session</span> <span class="k">=&gt;</span>
  <span class="k">val</span> <span class="nv">batchParams</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Seq</span><span class="o">[</span><span class="kt">Any</span><span class="o">]]</span> <span class="k">=</span> <span class="o">(</span><span class="mi">2001</span> <span class="n">to</span> <span class="mi">3000</span><span class="o">).</span><span class="py">map</span><span class="o">(</span><span class="n">i</span> <span class="k">=&gt;</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="s">"name"</span> <span class="o">+</span> <span class="n">i</span><span class="o">))</span>
  <span class="n">withSQL</span> <span class="o">{</span>
    <span class="nv">insert</span><span class="o">.</span><span class="py">into</span><span class="o">(</span><span class="nc">Emp</span><span class="o">).</span><span class="py">namedValues</span><span class="o">(</span><span class="nv">column</span><span class="o">.</span><span class="py">id</span> <span class="o">-&gt;</span> <span class="n">sqls</span><span class="o">.?,</span> <span class="nv">column</span><span class="o">.</span><span class="py">name</span> <span class="o">-&gt;</span> <span class="n">sqls</span><span class="o">.?)</span>
  <span class="o">}.</span><span class="py">batch</span><span class="o">(</span><span class="n">batchParams</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">).</span><span class="py">apply</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
          <hr/>
          <div class="alert alert-warning small">
            If this webpage has a typo or something wrong, Please report or fix it. <a href="/contribution.html">How?</a>
          </div>
        </div>
      </div>

      <div class="col-xs-3 right">
        <div class="content small">
          <h5>Latest version</h5>
          <hr/>
          <p><a href="/documentation/setup.html">Setup</a></p>
          <p><a href="/documentation/configuration.html">Configuration</a></p>
          <p><a href="/documentation/connection-pool.html">Connection Pool</a></p>
          <p><a href="/documentation/operations.html">Operations</a></p>
          <p><a href="/documentation/transaction.html">Transaction</a></p>
          <p><a href="/documentation/auto-session.html">Auto Session</a></p>
          <p><a href="/documentation/sql-interpolation.html">SQLInterpolation</a></p>
          <p><a href="/documentation/query-dsl.html">QueryDSL</a></p>
          <p><a href="/documentation/one-to-x.html">One-to-x API</a></p>
          <p><a href="/documentation/auto-macros.html">Auto Macros</a></p>
          <p><a href="/documentation/query-inspector.html">Logging / Query Inspector</a></p>
          <p><a href="/documentation/reverse-engineering.html">Reverse Engineering</a></p>
          <p><a href="/documentation/testing.html">Testing</a></p>
          <p><a href="/documentation/playframework-support.html">Play Framework</a></p>
          <p><a href="/documentation/reactivestreams-support.html">Reactive Streams</a></p>
          <p><a href="/documentation/dbconsole.html">dbconsole</a></p>
          <p><a href="https://www.javadoc.io/doc/org.scalikejdbc/scalikejdbc-core_2.13/4.3.0">Core API Doc</a></p>
          <p><a href="/documentation/faq.html">FAQ</a></p>
          <p><a href="/documentation/testimonials.html">Testimonials</a></p>
          <p><a href="/contribution.html">Contribution</a></p>
          <hr/>
          <h5>Older Versions</h5>
          <hr/>
          <p><a href="/documentation/2.x/">version 2.x</a></p>
          <p><a href="/documentation/1.x/">version 1.x</a></p>
        </div>
      </div>
    </div>
    </div>
    <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
(function() {
var cx = '000372347144050476309:fnw5lotlq6o';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>
  </body>
</html>
